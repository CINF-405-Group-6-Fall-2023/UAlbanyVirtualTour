<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campus Map</title>

    <!-- Load the static tag at the top of the file -->
    {% load static %}

    <!-- jQuery, maphilight, and htmx scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/maphilight/1.4.0/jquery.maphilight.min.js"></script>
    <script type="text/javascript" src="{% static 'js/htmx.min.js' %}"></script>
    <!-- maphilight styles (customize as needed) -->
    <style>
        .maphilighted {
            fill: true;
            fillColor: '46166b';
            fillOpacity: 0.5;
            stroke: true;
            strokeColor: 'eeb211';
            strokeOpacity: 1;
            strokeWidth: 5;
            fade: true;
            alwaysOn: false;
            neverOn: false;
            groupBy: false;
            wrapClass: true;
            shadow: false;
            shadowX: 0;
            shadowY: 0;
            shadowRadius: 6;
            shadowColor: '000000';
            shadowOpacity: 0.8;
            shadowPosition: 'outside';
            shadowFrom: false;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.map').maphilight();

            // Handle click event on map areas using htmx
            $('area').htmx({
                'hx-get': '{% url "get_building_info" building_slug="dummy" %}',  // Dummy URL
                'hx-trigger': 'click',
                'hx-target': '#building-details',
                'hx-swap': 'outerHTML',
                'hx-vals': {
                    'building_slug': function (el) {
                        return el.getAttribute('data-building-slug');
                    }
                }
            });
        });
    </script>
</head>
<body>

    <!-- Your map image and areas -->
    <img class="map" src="{% static 'img/mapUptown.png' %}" usemap="#image-map">

    <map name="image-map">
        <area target="" alt="Lecture Center" title="Lecture Center" href="/get_building_info/lecture-center/" coords="1091,737,1216,644" shape="rect" data-building-slug="lecture-center">
        <area target="" alt="Campus Center" title="Campus Center" href="{% url 'get_building_info' building_slug='campus-center' %}" coords="1138,753,1124,753,1124,799,1136,799,1136,815,1173,815,1173,797,1186,796,1186,753,1173,753,1171,774,1138,774" shape="poly">
        <area target="" alt="Performing Arts Center" title="Performing Arts Center" href="{% url 'get_building_info' building_slug='performing-arts-center' %}" coords="1229,657,1295,657,1295,723,1229,723,1229,698,1247,698,1247,680,1229,680" shape="poly">
        <area target="" alt="University Library" title="University Library" href="" coords="996,657,1080,657,1080,682,1058,682,1058,698,1080,698,1078,723,996,723" shape="poly">
	    <area target="" alt="Catskill Building" title="Catskill Building" href="" coords="957,604,1041,638" shape="rect">
        <area target="" alt="Arts And Sciences Building" title="Arts And Sciences Building" href="" coords="1051,604,1126,638" shape="rect">
        <area target="" alt="Fine Arts Building" title="Fine Arts Building" href="" coords="1183,605,1260,638" shape="rect">
        <area target="" alt="Earth Science &amp; Mathematics Building" title="Earth Science &amp; Mathematics Building" href="" coords="1268,605,1352,637" shape="rect">
        <area target="" alt="Biology Building" title="Biology Building" href="" coords="1350,641,1383,739" shape="rect">
        <area target="" alt="Chemistry Building" title="Chemistry Building" href="" coords="1268,742,1352,775" shape="rect">
        <area target="" alt="Physics Building" title="Physics Building" href="" coords="1202,745,1258,778" shape="rect">
        <area target="" alt="Taconic Building" title="Taconic Building" href="" coords="1052,743,1107,776" shape="rect">
        <area target="" alt="Humanities Building" title="Humanities Building" href="" coords="957,744,1041,775" shape="rect">
        <area target="" alt="Social Science Building" title="Social Science Building" href="" coords="928,640,959,739" shape="rect">
    </map>

    <!-- Display fetched building details using htmx -->
    <div id="building-details" hx-target="#building-details" hx-swap="outerHTML">
        <h2>Loading building details...</h2>
    </div>

</body>
</html>
